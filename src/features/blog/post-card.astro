---
import { cn } from "@/lib/utils";
import { Card } from "@/components/ui/card";
import { Typography } from "@/components/ui/typography";

interface Props {
  title: string;
  excerpt: string;
  date: string;
  category: string;
  slug: string;
  image: string;
  author?: {
    name: string;
    avatar: string;
  };
  readTime?: string;
  className?: string;
  variant?: "dark" | "light";
}

const { 
  title, 
  excerpt, 
  date, 
  category, 
  slug, 
  image, 
  author = { name: "Team TMNG", avatar: "/images/avatars/default.png" },
  readTime = "5 min read",
  className,
  variant = "dark" 
} = Astro.props;

const isDark = variant === "dark";
---

<a href={`/blog/${slug}`} class={cn(
    "group flex flex-col rounded-3xl overflow-hidden transition-all duration-500 ease-out hover:-translate-y-2",
    isDark 
        ? "glass-card hover:bg-white/5 hover:shadow-[0_10px_40px_-10px_rgba(232,121,249,0.2)]" 
        : "bg-white border border-black/5 hover:shadow-[0_20px_40px_-15px_rgba(0,0,0,0.1)]",
    className
)}>
  
  {/* Image Container */}
  <div class="h-64 relative overflow-hidden">
    <div class={cn("absolute inset-0 z-10 transition-colors duration-500", isDark ? "bg-obsidian-950/20 group-hover:bg-transparent" : "bg-black/5 group-hover:bg-transparent")}></div>
    <img 
        src={image} 
        alt={title} 
        class="w-full h-full object-cover transition-transform duration-700 ease-in-out group-hover:scale-105" 
    />
    
    {/* Floating Category Badge */}
    <div class="absolute top-4 left-4 z-20">
        <span class={cn(
            "px-3 py-1 rounded-full text-xs font-bold backdrop-blur-md border uppercase tracking-wider",
            isDark 
                ? "bg-obsidian-950/40 border-white/10 text-white" 
                : "bg-white/80 border-black/5 text-obsidian-900"
        )}>
            {category}
        </span>
    </div>
  </div>
  
  <div class={cn("p-8 grow flex flex-col", isDark ? "" : "border-t border-black/5")}>
    
    {/* Metadata */}
    <div class="flex items-center gap-2 text-xs font-medium mb-4 opacity-60">
        <span class={isDark ? "text-purple-200" : "text-slate-500"}>{date}</span>
        <span>â€¢</span>
        <span class={isDark ? "text-purple-200" : "text-slate-500"}>{readTime}</span>
    </div>

    {/* Title */}
    <Typography variant="h3" className={cn(
        "mb-3 text-2xl font-bold leading-tight transition-colors",
        isDark ? "text-white group-hover:text-fuchsia-400" : "text-slate-900 group-hover:text-fuchsia-600"
    )}>
      {title}
    </Typography>
    
    {/* Excerpt */}
    <p class={cn("text-base leading-relaxed mb-6 grow line-clamp-3", isDark ? "text-purple-200/70" : "text-slate-600")}>
      {excerpt}
    </p>
    
    {/* Author Footer */}
    <div class="flex items-center justify-between mt-auto">
        <div class="flex items-center gap-3">
             <div class={cn("w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold uppercase", isDark ? "bg-white/10 text-white" : "bg-slate-100 text-slate-700")}>
                {author.name.substring(0,2)}
             </div>
             <span class={cn("text-sm font-medium", isDark ? "text-white" : "text-slate-900")}>{author.name}</span>
        </div>

        <div class={cn(
            "w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 transform group-hover:translate-x-1",
            isDark ? "bg-white/10 text-white group-hover:bg-fuchsia-500" : "bg-slate-100 text-slate-700 group-hover:bg-fuchsia-600 group-hover:text-white"
        )}>
             <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
        </div>
    </div>

  </div>
</a>
