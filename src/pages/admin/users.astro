---
import AdminLayout from "../../features/admin/admin-layout";
import UsersManager from "../../features/admin/users-manager";

const user = Astro.locals.user;

if (!user) {
  return Astro.redirect("/admin/login");
}

// RESTRICT ACCESS TO ADMIN ONLY
if (user.role !== "admin") {
  return Astro.redirect("/admin/posts");
}
---

<AdminLayout user={user} currentPath="/admin/users" client:load>
  <div class="space-y-6 p-6">
    <div>
      <h1 class="text-3xl font-bold bg-clip-text text-transparent bg-linear-to-r from-white to-purple-200">
        User Management
      </h1>
      <p class="text-purple-200/70 mt-2">
        Manage user roles and permissions.
      </p>
    </div>

    <UsersManager currentUserId={user.id} client:load />
  </div>
</AdminLayout>
